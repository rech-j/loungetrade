{% extends "base.html" %}
{% block title %}Notifications â€” Lounge Coin{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-bold">Notifications</h1>
        {% if notifications %}
        <form method="post" action="{% url 'notifications_mark_all_read' %}">
            {% csrf_token %}
            <button type="submit" class="text-sm text-gold hover:text-gold/80">Mark all as read</button>
        </form>
        {% endif %}
    </div>

    {% if notifications %}
    <div class="space-y-2">
        {% for n in notifications %}
        <div class="block p-4 rounded-lg border {% if n.is_read %}border-stone dark:border-slate opacity-60{% else %}border-gold/30 bg-gold/5{% endif %}">
            <div class="flex items-start justify-between">
                <div>
                    {% if n.link %}
                    <a href="{{ n.link }}" class="text-sm font-medium hover:text-gold">{{ n.title }}</a>
                    {% else %}
                    <p class="text-sm font-medium">{{ n.title }}</p>
                    {% endif %}
                    <p class="text-sm text-slate mt-0.5">{{ n.message }}</p>
                    <p class="text-xs text-slate mt-1">{{ n.created_at|timesince }} ago</p>
                </div>
                {% if not n.is_read %}
                <form method="post" action="{% url 'notification_mark_read' n.pk %}">
                    {% csrf_token %}
                    <button type="submit" class="w-2 h-2 rounded-full bg-gold mt-1.5 flex-shrink-0" title="Mark as read"></button>
                </form>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-slate text-sm">No notifications yet.</p>
    {% endif %}
</div>
{% endblock %}
